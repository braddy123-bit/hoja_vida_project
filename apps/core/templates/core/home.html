{% extends 'base.html' %}

{% block title %}Hoja de Vida Digital{% endblock %}

{% block body %}
<div class="container-fluid">
    <div class="row">
        <!-- Sidebar -->
        <div class="col-auto sidebar">
            {% if perfil %}
                {% if perfil.foto_perfil %}
                    <img src="{{ perfil.foto_perfil.url }}" alt="{{ perfil.nombres }}" class="profile-image">
                {% else %}
                    <div class="profile-image bg-secondary d-flex align-items-center justify-content-center">
                        <i class="bi bi-person-circle" style="font-size: 4rem;"></i>
                    </div>
                {% endif %}
                
                <h2 class="profile-name">{{ perfil.nombres }} {{ perfil.apellidos }}</h2>
                <p class="profile-title">{{ perfil.descripcion_perfil }}</p>
                
                <ul class="nav-menu">
                    <li><a href="{% url 'core:home' %}" class="active"><i class="bi bi-house-door"></i> Inicio</a></li>
                    <li><a href="{% url 'perfiles:perfil_publico' %}"><i class="bi bi-person-badge"></i> Datos personales</a></li>
                    <li><a href="{% url 'perfiles:perfil_publico' %}#experiencia"><i class="bi bi-briefcase"></i> Experiencia</a></li>
                    <li><a href="{% url 'perfiles:perfil_publico' %}#cursos"><i class="bi bi-mortarboard"></i> Cursos</a></li>
                    <li><a href="{% url 'perfiles:perfil_publico' %}#reconocimientos"><i class="bi bi-trophy"></i> Reconocimientos</a></li>
                    <li><a href="{% url 'perfiles:perfil_publico' %}#proyectos"><i class="bi bi-folder2-open"></i> Proyectos</a></li>
                    <li><a href="{% url 'perfiles:venta_garage' perfil.numero_cedula %}"><i class="bi bi-shop"></i> Venta Garage</a></li>
                </ul>
                
                <div class="mt-4 pt-4" style="border-top: 1px solid rgba(255,255,255,0.2);">
                    <a href="{% url 'admin:index' %}" class="btn btn-light w-100 mb-2">
                        <i class="bi bi-gear"></i> Administración
                    </a>
                </div>
            {% endif %}
        </div>
        
        <!-- Main Content -->
        <div class="col main-content">
            <div class="welcome-section">
                <h1 class="welcome-title">Bienvenido/a</h1>
                <p class="welcome-subtitle">
                    Explora mi experiencia profesional, cursos y proyectos en esta hoja de vida digital.
                </p>
                <div class="d-flex gap-3 justify-content-center flex-wrap">
                    <a href="{% url 'perfiles:perfil_publico' %}" class="btn-custom">
                        <i class="bi bi-eye"></i> Ver Hoja de Vida
                    </a>
                    {% if perfil %}
                    <a href="{% url 'perfiles:generar_pdf' perfil.numero_cedula %}" class="btn-outline-custom">
                        <i class="bi bi-file-pdf"></i> Generar PDF
                    </a>
                    {% endif %}
                </div>
            </div>
            
            {% if perfil %}
            <div class="row">
                <div class="col-md-6 col-lg-3 mb-4">
                    <div class="section-card text-center">
                        <i class="bi bi-briefcase-fill" style="font-size: 3rem; color: var(--primary-color);"></i>
                        <h3 class="mt-3 mb-2" style="font-size: 2rem; font-weight: 700;">
                            {{ perfil.experiencias.count }}
                        </h3>
                        <p class="text-muted">Experiencias Laborales</p>
                    </div>
                </div>
                
                <div class="col-md-6 col-lg-3 mb-4">
                    <div class="section-card text-center">
                        <i class="bi bi-mortarboard-fill" style="font-size: 3rem; color: var(--primary-color);"></i>
                        <h3 class="mt-3 mb-2" style="font-size: 2rem; font-weight: 700;">
                            {{ perfil.cursos.count }}
                        </h3>
                        <p class="text-muted">Cursos Completados</p>
                    </div>
                </div>
                
                <div class="col-md-6 col-lg-3 mb-4">
                    <div class="section-card text-center">
                        <i class="bi bi-trophy-fill" style="font-size: 3rem; color: var(--primary-color);"></i>
                        <h3 class="mt-3 mb-2" style="font-size: 2rem; font-weight: 700;">
                            {{ perfil.reconocimientos.count }}
                        </h3>
                        <p class="text-muted">Reconocimientos</p>
                    </div>
                </div>
                
                <div class="col-md-6 col-lg-3 mb-4">
                    <div class="section-card text-center">
                        <i class="bi bi-folder-fill" style="font-size: 3rem; color: var(--primary-color);"></i>
                        <h3 class="mt-3 mb-2" style="font-size: 2rem; font-weight: 700;">
                            {{ perfil.productos_academicos.count|add:perfil.productos_laborales.count }}
                        </h3>
                        <p class="text-muted">Proyectos Totales</p>
                    </div>
                </div>
            </div>
            {% else %}
            <div class="alert alert-warning">
                <i class="bi bi-exclamation-triangle"></i>
                No hay perfiles activos. Por favor, crea uno en el panel de administración.
            </div>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}
